const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-D1XfOTka.js","assets/vendor-BomGrhGO.js","assets/supabase-DoogjvA8.js","assets/HomeView-BRfF9Ts0.css","assets/PedidosView-B9afJgpt.js","assets/AdminView-CYUDPQf_.js","assets/LoginView-DxMjQfH0.js"])))=>i.map(i=>d[i]);
import{d as R,r as p,c as v,a as H,b as U,o as O,e as g,f,F as j,g as F,n as k,h as r,t as y,i as $,j as W,k as Y,l as N,u as E,m as D,p as Z,w as G,q as Q,s as X,v as K}from"./vendor-BomGrhGO.js";import{c as ee,_ as S}from"./supabase-DoogjvA8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))m(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const te="https://uvfyjylzqkchrocrydkf.supabase.co",re="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2ZnlqeWx6cWtjaHJvY3J5ZGtmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODc1NTQsImV4cCI6MjA3MTY2MzU1NH0.hiu5dsQP1c_0nf5EhAWxEIhZAFHzWs39lj5YvRetut4",P=ee(te,re,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),A=u=>(console.error("Supabase Error:",u),{success:!1,error:u.message||"Error desconocido"}),V=(u,s="Operación exitosa")=>({success:!0,data:u,message:s}),M=R("main",()=>{const u=p([]),s=p([]),c=p([]),m=p([]),e=p([]),o=p(!1),l=p(null),h=p(!1),n=p(null),i=v(()=>e.value.reduce((t,a)=>t+a.cantidad,0)),d=v(()=>i.value>=12?13e3:16e3),_=v(()=>e.value.reduce((t,a)=>t+a.cantidad*d.value,0)),I=v(()=>u.value.reduce((t,a)=>t+a.stock,0)),w=v(()=>c.value.reduce((t,a)=>t+a.total,0)),C=async()=>{try{o.value=!0;const{data:t,error:a}=await P.from("productos").select("*").order("nombre");if(a)throw a;return u.value=t||[],V(t,"Productos cargados")}catch(t){return l.value=t.message,A(t)}finally{o.value=!1}},b=async()=>{try{o.value=!0;const{data:t,error:a}=await P.from("vendedores").select("*").order("nombre");if(a)throw a;return s.value=t||[],V(t,"Vendedores cargados")}catch(t){return l.value=t.message,A(t)}finally{o.value=!1}},L=async()=>{try{const{data:t,error:a}=await P.from("clientes").select("*").order("nombre");if(a)throw a;return m.value=t||[],V(t,"Clientes cargados")}catch(t){return l.value=t.message,A(t)}},x=async()=>{try{const{data:t,error:a}=await P.from("pedidos").select(`
          *,
          producto:productos(nombre),
          vendedor:vendedores(nombre),
          cliente:clientes(nombre)
        `).order("fecha",{ascending:!1});if(a)throw a;return c.value=t||[],V(t,"Pedidos cargados")}catch(t){return l.value=t.message,A(t)}};return{productos:u,vendedores:s,pedidos:c,clientes:m,carrito:e,loading:o,error:l,isAdminLoggedIn:h,currentUser:n,totalUnidadesCarrito:i,precioGlobal:d,totalCarrito:_,totalStock:I,totalVentas:w,loadProductos:C,loadVendedores:b,loadClientes:L,loadPedidos:x,loadInitialData:async()=>{await Promise.all([C(),b(),L(),x()])},addToCart:(t,a,q="")=>{const z=e.value.find(B=>B.producto.id===t.id);z?z.cantidad+=a:e.value.push({producto:t,cantidad:a,nombres_personalizados:q})},removeFromCart:t=>{e.value.splice(t,1)},clearCart:()=>{e.value=[]},clearError:()=>{l.value=null}}}),se=[{path:"/",name:"Home",component:()=>S(()=>import("./HomeView-D1XfOTka.js"),__vite__mapDeps([0,1,2,3])),meta:{title:"Sistema de Velas"}},{path:"/pedidos",name:"Pedidos",component:()=>S(()=>import("./PedidosView-B9afJgpt.js"),__vite__mapDeps([4,1,2])),meta:{title:"Hacer Pedido"}},{path:"/admin",name:"Admin",component:()=>S(()=>import("./AdminView-CYUDPQf_.js"),__vite__mapDeps([5,1,2])),meta:{title:"Panel de Administración",requiresAuth:!0}},{path:"/login",name:"Login",component:()=>S(()=>import("./LoginView-DxMjQfH0.js"),__vite__mapDeps([6,1,2])),meta:{title:"Iniciar Sesión"}}],J=H({history:U(),routes:se,scrollBehavior(u,s,c){return c||{top:0}}});J.beforeEach((u,s,c)=>{const m=M();document.title=u.meta.title||"Sistema de Velas",u.meta.requiresAuth&&!m.isAdminLoggedIn?c("/login"):c()});const oe={class:"fixed top-4 right-4 z-50 space-y-2"},ae={class:"p-4"},ne={class:"flex items-start"},ie={class:"flex-shrink-0"},ce={class:"ml-3 w-0 flex-1 pt-0.5"},le={class:"text-sm font-medium text-gray-900"},de={key:0,class:"mt-1 text-sm text-gray-500"},ue={class:"ml-4 flex-shrink-0 flex"},me=["onClick"],pe={__name:"NotificationSystem",setup(u){const s=p([]);let c=0;const m=(n,i,d="",_=5e3)=>{const I=++c,w={id:I,type:n,title:i,message:d,show:!1,progress:100};s.value.push(w),setTimeout(()=>{w.show=!0},100);const C=Date.now(),b=()=>{const L=Date.now()-C,x=Math.max(0,_-L);w.progress=x/_*100,x>0?requestAnimationFrame(b):e(I)};requestAnimationFrame(b)},e=n=>{const i=s.value.findIndex(d=>d.id===n);i>-1&&(s.value[i].show=!1,setTimeout(()=>{s.value.splice(i,1)},300))},o=n=>{switch(n){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📢"}},l=n=>{switch(n){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-gray-500"}},h=n=>{switch(n){case"success":return"bg-green-200";case"error":return"bg-red-200";case"warning":return"bg-yellow-200";case"info":return"bg-blue-200";default:return"bg-gray-200"}};return O(()=>{window.showNotification=(n,i)=>m("success",n,i),window.showError=(n,i)=>m("error",n,i),window.showWarning=(n,i)=>m("warning",n,i),window.showInfo=(n,i)=>m("info",n,i)}),(n,i)=>(f(),g("div",oe,[(f(!0),g(j,null,F(s.value,d=>(f(),g("div",{key:d.id,class:k(["max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden transform transition-all duration-300",d.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[r("div",ae,[r("div",ne,[r("div",ie,[r("div",{class:k([l(d.type),"text-xl"])},y(o(d.type)),3)]),r("div",ce,[r("p",le,y(d.title),1),d.message?(f(),g("p",de,y(d.message),1)):$("",!0)]),r("div",ue,[r("button",{onClick:_=>e(d.id),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none"},[...i[0]||(i[0]=[r("span",{class:"sr-only"},"Cerrar",-1),r("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,me)])])]),r("div",{class:k([h(d.type),"h-1"])},[r("div",{class:"h-full transition-all duration-300 ease-linear",style:W({width:`${d.progress}%`})},null,4)],2)],2))),128))]))}},fe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},he={class:"bg-white rounded-lg p-8 flex flex-col items-center space-y-4"},ge={class:"text-gray-700 font-medium"},ve={__name:"LoadingSpinner",setup(u){const s=p(!1),c=p("Cargando..."),m=(o="Cargando...")=>{c.value=o,s.value=!0},e=()=>{s.value=!1};return O(()=>{window.showLoading=m,window.hideLoading=e}),(o,l)=>s.value?(f(),g("div",fe,[r("div",he,[l[0]||(l[0]=r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"},null,-1)),r("p",ge,y(c.value),1)])])):$("",!0)}},ye={id:"app",class:"min-h-screen bg-gray-50"},_e={class:"bg-white shadow-sm border-b"},we={class:"container mx-auto px-4"},be={class:"flex space-x-1"},xe={class:"container mx-auto px-4 py-8"},Ie={key:0,class:"flex justify-center items-center py-12"},Ce={key:1,class:"mb-6"},Le={class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center justify-between"},Ee={__name:"App",setup(u){const s=M(),c=v(()=>[{name:"home",path:"/",label:"Inicio"},{name:"pedidos",path:"/pedidos",label:"Hacer Pedido"},{name:"admin",path:"/admin",label:"Administrador"}]);return O(async()=>{window.showLoading("Cargando datos iniciales...");try{await s.loadInitialData()}finally{window.hideLoading()}}),(m,e)=>{const o=D("router-link"),l=D("router-view");return f(),g("div",ye,[e[2]||(e[2]=Y('<header class="bg-gradient-to-r from-primary-500 to-secondary-500 text-white shadow-lg"><div class="container mx-auto px-4 py-6"><div class="flex items-center justify-between"><div class="text-center flex-1"><h1 class="text-3xl md:text-4xl font-bold mb-2"> 🏪 Sistema de Inventario de Velas </h1><p class="text-lg opacity-90"> Gestiona tus productos y pedidos de forma eficiente </p></div></div></div></header>',1)),r("nav",_e,[r("div",we,[r("div",be,[(f(!0),g(j,null,F(c.value,h=>(f(),Z(o,{key:h.name,to:h.path,class:k(["px-6 py-4 text-gray-600 hover:text-primary-600 hover:bg-gray-50 transition-colors duration-200 font-medium",{"text-primary-600 border-b-2 border-primary-600":m.$route.path===h.path}])},{default:G(()=>[Q(y(h.label),1)]),_:2},1032,["to","class"]))),128))])])]),r("main",xe,[E(s).loading?(f(),g("div",Ie,[...e[1]||(e[1]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"},null,-1)])])):$("",!0),E(s).error?(f(),g("div",Ce,[r("div",Le,[r("span",null,y(E(s).error),1),r("button",{onClick:e[0]||(e[0]=h=>E(s).clearError()),class:"text-red-500 hover:text-red-700"}," ✕ ")])])):$("",!0),N(l)]),e[3]||(e[3]=r("footer",{class:"bg-gray-800 text-white py-6 mt-12"},[r("div",{class:"container mx-auto px-4 text-center"},[r("p",null,"© 2024 Sistema de Inventario de Velas - Versión Moderna")])],-1)),N(pe),N(ve)])}}},T=X(Ee);T.use(K());T.use(J);T.mount("#app");export{P as s,M as u};
